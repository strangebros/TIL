# 1. 문제 및 설계 범위 확정

## 1.1 기능 정의 및 범위 설정

1. **주변 친구 정의:** 지리적으로 5마일(mile) 이내에 있는 친구로 정의하며, 이 수치는 설정 가능해야 함.
2. **거리 계산:** 두 사용자 사이의 직선거리로 가정함.
3. **사용자 규모 가정:** 10억 명의 사용자 중 10%인 1억 명이 이 기능을 활용한다고 가정함.
4. **동시 접속 사용자:** 일간 능동 사용자(DAU)의 10%인 천만 명이 동시에 시스템을 이용한다고 가정함.
5. **비활성 처리:** 친구 관계에 있는 사용자가 10분 이상 비활성 상태면 주변 친구 목록에서 사라지도록 처리함.

## 1.2 기능 요구사항 (Functional Requirements)

1. 사용자는 모바일 앱에서 주변 친구 목록을 확인할 수 있어야 함.
2. 각 항목에는 해당 친구까지의 **거리**와 **갱신된 시각(timestamp)**이 함께 표시되어야 함.
3. 친구 목록은 **몇 초마다 한 번씩 갱신**되어야 함.

## 1.3 비기능 요구사항 (Non-functional Requirements)

1. **낮은 지연 시간 (Low Latency):** 위치 변화가 반영되는 데 오랜 시간이 걸리지 않아야 함.
2. **안정성:** 시스템은 전반적으로 안정적이어야 하며, 때로 몇 개 데이터가 유실되는 것은 용인할 수 있음.
3. **결과적 일관성 (Eventual Consistency):** 위치 데이터 저장에 강한 일관성을 요구하지 않으며, 데이터가 복제본과 동일하게 변경되는 데 몇 초 걸리는 것은 용인할 수 있음.

## 1.4 개략적 규모 추정

1. **주변 친구 정의:** 5마일(8km) 반경 이내 친구로 정의함.
2. **위치 갱신 주기:** 친구 위치 정보는 30초 주기로 갱신함.
3. **DAU:** 매일 주변 친구 기능을 활용하는 사용자는 1억 명으로 가정함.
4. **동시 접속 사용자:** 천만 명으로 가정함.
5. **평균 친구 수:** 사용자는 평균 400명의 친구를 가지며, 모두 이 기능을 활용한다고 가정함.
6. **위치 정보 갱신 QPS (Query Per Second):** 천만 명의 사용자가 30초마다 위치를 전송하면 초당 334,000번의 위치 정보 갱신 요청을 처리해야 함.

# 2. 개략적 설계안 제시 및 동의 구하기