## 개요

- 회사에서 암호화를 통해 데이터를 주고받는 시스템을 만들어야 해서, 테스트용 코드를 만들어야 합니다.
- 마침 저는 암복호화에 대한 지식이 없습니다. 회사에서 새로 하는 것마다 모르는 거라서, 이젠 놀랍지도 않습니다.
- 그래도 공부해야겠죠?

## 대칭키/비대칭키 암호화 방식

### 대칭키 개념
- 대칭키 방식은 하나의 키를 사용하여 암호화와 복호화를 하는 방식입니다.
- 대표적으로 `AES`, `SEED`, `DES`, `ARIA` 등의 방식이 있습니다.
- 대칭키 방식의 장점은 하나의 키를 사용하기 때문에 키 관리가 용이하고, 대용량 데이터 처리에도 속도가 빠르다는 것입니다.
- 대칭키 방식의 단점은 키가 유출될 위험이 커서 비교적 보안적으로 취약하다는 것입니다.

### 비대칭키 개념
- 비대칭키 방식은 공개키로 암호화를 하고, 개인키로 복호화를 하는 방식입니다.
- 이때, 통신을 보내는 상대 쪽의 공개키로 암호화를 하기 때문에, 통신 로직 개발 전에 미리 공개키를 공유합니다.
- 대표적으로 `RSA`, `DSA`, `ECC` 등의 방식이 있습니다.
- 비대칭키 방식의 장점은 개인 키를 공유하지 않기 때문에, 보안적으로 더 안전하다는 것입니다.
- 비대칭키 방식의 단점은 키를 더 많이 관리해야 하고(양방향 시 2쌍-4개), 속도가 느리다는 것입니다. 또한, 한 번에 최대 190바이트의 평문 데이터만 암호화할 수 있다는 단점도 있습니다.

## 공개키/비공개키

### 개념

- 공개키/비공개키는 비대칭키에 사용되는 한 쌍의 키입니다.
- 워딩 그대로, 공개키는 다른 쪽에 공개되는 키이며, 비공개키는 생성한 주체가 그대로 가지고 있는 키입니다.
- 공개키는 암호화를 하는 역할이며, 개인키는 복호화를 하는 역할입니다.
- 공개키와 비공개키는 한 쌍으로 이루어져 있습니다.

## SSL 방식의 암/복호화

SSL/TLS(HTTPS)가 사용하는 암호화는 "하이브리드 암호화(Hybrid Encrypthion)" 구조이며, 대칭키 + 비대칭키를 동시에 사용합니다.

- 초기 연결 시: 공개키 기반 암호화(RSA/ECDHE)로 안전하게 대칭키를 교환
- 그 후 데이터 송수신: 빠른 대칭키 암호화(AES 등)로 실제 데이터 암호화
- 해당 방식을 사용하면, 대칭키와 비대칭키의 장점을 모두 사용할 수 있어 암호화 통신에 효과적입니다.

### SSL/TLS에서 보안 통신의 실제 동작 순서

1. 클라이언트 -> 서버 : TLS로 통신 요청(`ClientHello`)
2. 서버 -> 클라이언트 : 통신 수락. 공개키 전송(`ServerHello`, 인증서 포함)
3. 클라이언트 : 대칭키(`AES` 등의 세션키) 를 랜텀 생성, 서버의 공개키로 암호화해 서버에 전송
4. 서버 : 자신의 비공개키로 복호화하여 세션키 확보
5. 양쪽 모두 세션키 공유 완료 : 이제 `AES`같은 대칭키 암호화로 안전하게 통신
