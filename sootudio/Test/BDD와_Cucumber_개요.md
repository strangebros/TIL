## BDD란?

- BDD는 'Behavior-Driven-Development'의 약자로, 한국어로는 '행위(행동) 주도 개발' 정도로 해석할 수 있습니다.

### BDD의 역할은?

- BDD는 개발자만을 위한 것이라기 보다는, 프로젝트 시 조직 내의 개발자와 비개발자 간 간극을 줄여주는 역할을 합니다.

- 특히, 시스템의 행동을 자동으로 검증하는 문서, 즉 살아있는 테스트 문사를 만들 수 있으므 빠르게 피드백을 얻으며, 최소한의 미팅으로 팀의 공통된 이해 수준을 가져갈 수 있습니다.

## Cucumber란?

- Cucumber는 BDD를 실현해주는 도구 중 하나입니다.

- `.feature` 확장자를 가진 파일에 Gherkin 문법으로 시나리오를 적어, 개발자와 비개발자 모두가 쉽게 읽을 수 있는 문서를 작성할 수 있습니다.
    - 또한, 해당 문서는 자동화된 테스트 도구로도 사용할 수 있습니다.
 
### Cucumber의 핵심
- Gherkin(사람이 읽는 명세) <-> Step Definitions(실행 코드) 연결
- Runner(JUnit Platform Suite), GLUE(스텝 패키지), features/ 디렉터리

## Gherkin 문법 알아보기

### Gherkin이란?

- 테스트 시나리오를 Cucumber가 이해할 수 있도록 만들어주는 문법
- 실제 시나리오처럼 자연어로 작성할 수 있다는 장점
- `.feature` 파일에서 사용

### Feature

- 소프트웨어의 기능을 설명하거나 연관된 시나리오를 그룹핑 하는 키워드
- 키워드 바로 아래에는 설명을 추가할 수 있음
- `:` 를 사용
- `.feature` 파일의 시작은 항상 `Feature` 키워드

- 예시

```
Feature: 가위바위보
    (설명)
    가위바위보는 최소 두 명부터 여러명이서 할 수 있는 게임입니다.
    가위는 바위에게 지고, 보에게 이깁니다.
    바위는 보에게 지고, 가위에게 이깁니다.
    보는 가위에게 지고, 바위에게 이깁니다.

    (시나리오 시작)
    Scenario(=Example): 두 플레이아가 게임을 시작합니다.
```

### Scenario

- 비즈니스 규칙을 설명하는 구체적인 예시
- Given, When, Then 등의 step으로 이루어짐
    - 너무 많은 step은 가독성이 떨어지기 때문에, 3~5 step 권장
- `:` 사용
- 각 step의 문장은 중복되선 안됨. 각각이 고유한 단계 명을 가져야 함.
- 이미 사용한 문장은 다른 시나리오의 step에서도 사용하면 안됨.

```
Given Walkie는 걷기 서비스이다.
Then Walkie는 걷기 서비스이다.
```
- 위와 같은 경우, 다른 키워드를 사용했지만 같은 step으로 인식하기 때문에, 아래에 쓰인 Then은 무시됨.


### Given

- 시스템의 초기 컨텍스트, 즉 초기 시나리오의 장면이나 조건 설명
    - 일반적으로 과거에 있었던 일
    - 사용자가 시스템과 상호작용을 시작하기 전에 어떤 상태인지 알려줌 
- 콜론을 사용하지 않음

### When

- 이벤트나 액션 설명
- 사용자와 시스템간의 상호작용, 다른 시스템에 의해 발생할 수 있는 이벤트 등 작성
    - 구현에 대한 세부 사항은 숨김
- 콜론 사용하지 않음

### Then

- 예상되는 결과나 결과에 대한 설명
- 사용자가 눈으로 확인할 수 있는 것들에 대해서 묘사
    - 시스템에서 나오는 것으로 묘사
    - 예) ui, 알럿 메시지, 보고서 등등
- 콜론 사용하지 않음

```
Then 사용자는 예약 완료 알림을 받는다.
```

### And, But

- Given, When, Then을 여러 번 쓸 때 대체해서 사용할 수 있다.

```
Given A
Given B
Given C
```

위와 같은 시나리오를, And와 But을 사용하여 아래처럼 바꿀 수 있다.
이렇게 작성하면 구분에 더 용이하다.

```
Given A
And B
But C
```


### Scenario Outline

- 시나리오를 다른 조건으로 여러 번 반복해야 할 때 사용한다.
- 교체하면서 테스트 해야 하는 변수들은 <> 으로 감싸준다.
- 콜론을 사용한다.
- Examples(복수형)에는 변수에 테스트 해볼 값들을 테이블로 처리할 수 있다.
    - 테이블은 `|` 로 구분한다.
    - 콜론을 사용한다.
    - markdown의 테이블 만드는 방식과 동일하다.


### Background

- 모든 시나리오에서 동일한 Given step을 반복하는 경우에 사용합니다.
- 모든 시나리오에서 반복되기 떄문에 주의해서 사용
    - 복잡하면 안되고, 짧은 동작을 정의합니다.
- Scenario 전에 선언하며, 시나리오와 같은 들여쓰기 레벨이다.
- 콜론을 사용한다. 


### Docs Strings

- 말 그대로, 테스트 문서에 대한 설명(주석)입니다.
- `""" """`를 사용하여 테스트 문서에 대한 자세한 설명을 작성할 수 있습니다.
- 키워드가 아니기 때문에, 테스트를 시행할 때는 무시됩니다.

```
Given 가위바위보 게임에 2 사람이 참여한다.
    """
    가위바위보 게임은 2명이서 하는 대결 게임이다.
    """
When ...
Then ...
```

