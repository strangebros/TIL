## 개요

- 최근 회사에서 외부 연계 서비스의 IP와 관련해서 업무를 맡은 적이 있었는데, 관련 지식이 없어서 업무 진행에 시간이 많이 걸렸습니다.
- 그래서, 이번 기회를 통해 IP의 개념에 대해서 조금은 정리하고 가려고 합니다.

## IP

### IP의 개념

- Internet Protocol address
- 네트워크상에서 하나의 장비(서버, PC, 라우터 등)를 식별하기 위한 고유한 주소.
- 예시: `192.168.0.10` , `10.20.10.114` 등

### 특징

- 하나의 실제 네트워크 인터페이스(물리/가상 NIC)에 할당됨
- 각 장비나 VM, 컨테이너가 고유한 IP를 가짐
- 예: 웹서버 3대 -> 각각 IP가 다름
```

Web1: 10.0.0.11
Web2: 10.0.0.12
Web3: 10.0.0.13
```

## VIP

### VIP의 개념

- Virtual IP, 가상 IP
- 실제 특정 서버에 고정되어 있지 않은 "가상의 IP 주소"

### 특징

- 여러 서버 중 하나가 대표로 이 IP를 소유하고 서비스하도록 구성함
- 고가용성(HA) 또는 로드밸런싱을 위해 사용됨
- 예시 상황:

```

VIP: 10.0.0.100 <- 클라이언트는 항상 여기에 접속함
실제 서버들:
    Web1: 10.0.0.11
    Web2: 10.0.0.12

```

- 위 구조로 되어 있을 떄:
    - 평소엔 Web1이 VIP(10.0.0.100)을 가지고 서비스함
    - Web1이 죽으면, 자동으로 Web2가 VIP를 가져와서 서비스 이어감(이중화)
        -> 클라이언트는 여전히 `10.0.0.100`으로 접속하지만, 실제로는 Web2로 연결됨.
    - Web1이 죽으면 Web2가 가져가는 형식이 아니라, 이중화 서버 등 똑갘이 켜져 있는 상태에서도 VIP는 동일하게 적용됨.

### VIP의 실제 사용 예시

- HAProxy / Keepalived:
    - `keepalived`로 VIP를 관리해, Active 서버 다운 시 Standby가 인계.
- Kubernetes:
    - Service의 `ClusterIP`나 `LoadBalancer IP`가 VIP처럼 동작.
- AWS ALB/NLB:
    - DNS로 추상화되지만, 내부적으로 VIP를 관리하며 트래픽을 분산.
